#
# ~/.aliases
#

## mutt
alias mail='neomutt -F ~/.config/neomutt/account.gmail'
alias workmail='neomutt -F ~/.config/neomutt/account.hireology'

## Clipboard
# only on Linux
if [[ `uname` == "Linux" ]]; then
    alias pbcopy='xclip -selection clipboard -in'
    alias pbpaste='xclip -selection clipboard -out'
    alias xcopy='xsel --output'
    alias xpaste='xsel --input'
    alias l='ls -lh --color'
    alias lt='ls -lht --color'
    alias lah='ls -lah --color'
    alias lr='ls -R --color'
    alias ipv4='ip a | grep '\''inet\b'\'' | awk '\''{print $2}'\'''
    alias shot='import $HOME/pictures/screenshots/$(datetime).png'
fi

# only on OSX
if [[ `uname` == "Darwin" ]]; then
    alias showhidden='defaults write com.apple.finder AppleShowAllFiles YES; killall Finder /System/Library/CoreServices/Finder.app'
    alias noshowhidden='defaults write com.apple.finder AppleShowAllFiles NO; killall Finder /System/Library/CoreServices/Finder.app'
    alias l='ls -lhG'
    alias lt='ls -lhGt'
    alias la='ls -lahG'
    alias lr='ls -RG'
    alias mute='osascript -e "set volume 0"'
    alias ipv4='ifconfig | grep '\''inet\b'\'' | awk '\''{print $2}'\'''
fi

## General stuff
alias g='grep -I --color=auto --exclude-dir=.git --exclude-dir=.vagrant --exclude-dir=logs --exclude=*.log'
alias gr='g -r'
alias gri='g -ri'
alias isomount='sudo mount -o loop,exec'
alias z='. ~/.zshrc'
alias b='. ~/.bashrc'
alias ta='tmux attach -t'
alias tl='tmux ls'
alias ncdu='ncdu --color dark'

## Random
alias n='echo "\n"`date +%Y/%m/%d" | "%R`"\n" >> $HOME/sync/notes.md && vim + -c "startinsert" $HOME/sync/notes.md'
alias news=newsboat
alias ipt='sudo iptables -L --line-number'
alias fw='sudo firewall-cmd'
alias fwls='sudo firewall-cmd --list-all'
alias rmq='sudo rabbitmqctl '
alias shortdate='date +%Y%m%d'
alias datetime='date +%Y%m%d.%H%M%S'
alias epoch='date +%s'
alias pts='phoronix-test-suite'
alias jctl='sudo journalctl -f'

## Golang
alias gt='go test -cover '
alias gta='go test -cover ./...'

## Git
alias gst='git status -s'
alias gco='git checkout'
alias gs='git stash'
alias gsa='git stash apply'
alias gsp='git stash pop'
alias gpo='git push origin'
alias gpoh='git push origin HEAD'
alias gp='git pull'

## vim
alias e='vim -p '
alias se='sudo -e '

## Apt
alias acs="apt-cache search"
alias acp="apt-cache policy"
alias acsh="apt-cache show"
alias ai="sudo apt-get install"
alias aa="sudo apt-get autoremove"
alias ar="sudo apt-get remove"

## dnf
alias di='sudo dnf install'
alias ds='dnf search'
alias dr='sudo dnf remove'
alias upgrade='sudo dnf -y update'

## Ansible
alias ad='ansible-doc'
alias am='ansible-doc -s'
alias avc='ansible-vault create'
alias avd='ansible-vault decrypt'
alias ave='ansible-vault edit'
alias avx='ansible-vault encrypt'
alias avr='ansible-vault rekey '
alias avv='ansible-vault view '
alias ap='time ansible-playbook'
alias a='time ansible'

## Vagrant
alias v='vagrant'
alias vu='time vagrant up --parallel'
alias vd='vagrant destroy --force'
alias vr='time vagrant reload'
alias vs='vagrant ssh'
alias vst='vagrant status'
alias vp='time vagrant provision'
alias vsc='vagrant ssh-config'
alias vpp='time vagrant provision --provision-with'

## Docker
alias d='docker '
alias dc='docker-compose '
alias dp='docker ps '
alias dct='docker container '

dish() {
    # docker interactive shell
    docker exec -it $1 /bin/bash

    # if this doesn't work try
    #docker run -it --entrypoint /bin/bash $1
}

## AWS
alias cb='aws codebuild '
alias s3='aws s3 '
alias ec2='aws ec2 '

## Terraform
alias tf='terraform '
alias tfp='terraform plan '
alias tfa='terraform apply '

## openqa
alias oca='openqa-cli api '

## viSQL
if [[ ! -z `which vimpager` ]]; then
    alias psql='PAGER=vimpager psql';
fi

# search for processes and keep column headings
pg() {
    ps x | grep --color=auto $1
}

## History grep
h() {
    history | grep --color=auto $1
}

## Pull code into correct dir
ghclone() {
    git clone git@github.com:$1 ~/code/$1
}

## network reset
nwreset() {
    nmcli n off
    nmcli n on
    nmcli con up enp5s0
}

## destroy a virt-install guest
vnuke() {
    virsh destroy $1
    virsh undefine $1
    virsh vol-delete --pool default $1.qcow2
}
